import type { Component, JSX } from "solid-js";
import { splitProps } from "solid-js";
import styles from "./Icon.module.css";

/** Inline SVG paths for each icon — 24x24 viewBox */
const ICON_PATHS: Record<string, string> = {
  shield:
    "M12 2L3 7v5c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-9-5z",
  eye:
    "M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zm0 12.5c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8a3 3 0 100 6 3 3 0 000-6z",
  "eye-off":
    "M12 7a5 5 0 015 5 4.85 4.85 0 01-.36 1.83l2.92 2.92A11.82 11.82 0 0023 12c-1.73-4.39-6-7.5-11-7.5a11.65 11.65 0 00-4 .7l2.17 2.17A4.85 4.85 0 0112 7zM2 4.27l2.28 2.28.46.46A11.8 11.8 0 001 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55A2.82 2.82 0 009 12a3 3 0 003 3c.22 0 .44-.03.65-.08l1.55 1.55A4.97 4.97 0 0112 17a5 5 0 01-5-5c0-.74.16-1.44.46-2.08l.07-.12z",
  check:
    "M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z",
  alert:
    "M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z",
  info:
    "M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z",
  copy:
    "M16 1H4a2 2 0 00-2 2v14h2V3h12V1zm3 4H8a2 2 0 00-2 2v14a2 2 0 002 2h11a2 2 0 002-2V7a2 2 0 00-2-2zm0 16H8V7h11v14z",
  lock:
    "M18 8h-1V6A5 5 0 007 6v2H6a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V10a2 2 0 00-2-2zm-6 9a2 2 0 110-4 2 2 0 010 4zM9 8V6a3 3 0 116 0v2H9z",
  spinner:
    "M12 2a10 10 0 00-7.07 2.93l1.41 1.41A8 8 0 0112 4V2z",
  "chevron-right":
    "M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6-6-6z",
  plus:
    "M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z",
  x:
    "M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z",
  list:
    "M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z",
  settings:
    "M19.14 12.94a7.07 7.07 0 000-1.88l2.03-1.58a.49.49 0 00.12-.61l-1.92-3.32a.49.49 0 00-.59-.22l-2.39.96a7.04 7.04 0 00-1.63-.94l-.36-2.54a.48.48 0 00-.48-.41h-3.84a.48.48 0 00-.48.41l-.36 2.54a7.04 7.04 0 00-1.63.94l-2.39-.96a.49.49 0 00-.59.22L2.74 8.87a.48.48 0 00.12.61l2.03 1.58a7.07 7.07 0 000 1.88l-2.03 1.58a.49.49 0 00-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.04.7 1.63.94l.36 2.54c.05.24.26.41.48.41h3.84c.24 0 .44-.17.48-.41l.36-2.54a7.04 7.04 0 001.63-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32a.49.49 0 00-.12-.61l-2.03-1.58zM12 15.6A3.6 3.6 0 1115.6 12 3.6 3.6 0 0112 15.6z",
  folder:
    "M10 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V8a2 2 0 00-2-2h-8l-2-2z",
  star:
    "M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z",
  search:
    "M15.5 14h-.79l-.28-.27a6.51 6.51 0 001.48-5.34c-.47-2.78-2.79-5-5.59-5.34a6.505 6.505 0 00-7.27 7.27c.34 2.8 2.56 5.12 5.34 5.59a6.51 6.51 0 005.34-1.48l.27.28v.79l4.25 4.25c.41.41 1.08.41 1.49 0 .41-.41.41-1.08 0-1.49L15.5 14zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z",
  refresh:
    "M17.65 6.35A7.96 7.96 0 0012 4a8 8 0 108 8h-2a6 6 0 11-1.76-4.24L14 10h7V3l-3.35 3.35z",
  heart:
    "M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z",
  "chevron-down":
    "M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z",
  paperclip:
    "M21.58 12.58l-9-9a6.53 6.53 0 00-9.19 0 6.53 6.53 0 000 9.19l9 9a4.53 4.53 0 006.36 0 4.53 4.53 0 000-6.36l-9-9a2.53 2.53 0 00-3.54 0 2.53 2.53 0 000 3.54l6.3 6.29 1.41-1.41-6.3-6.3a.53.53 0 010-.71.53.53 0 01.71 0l9 9a2.53 2.53 0 010 3.54 2.53 2.53 0 01-3.54 0l-9-9a4.53 4.53 0 010-6.36 4.53 4.53 0 016.36 0l9 9-1.42 1.41z",
  upload:
    "M9 16h6v-6h4l-7-7-7 7h4v6zm-4 2h14v2H5v-2z",
  download:
    "M19 9h-4V3H9v6H5l7 7 7-7zM5 18v2h14v-2H5z",
  trash:
    "M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z",
  "credit-card":
    "M20 4H4c-1.11 0-2 .89-2 2v12c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2zm0 14H4v-6h16v6zm0-10H4V6h16v2z",
  user:
    "M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z",
  terminal:
    "M20 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2zM7.29 15.71L5.88 14.3 9.17 11 5.88 7.71l1.41-1.42L11.99 11l-4.7 4.71zM19 16h-6v-2h6v2z",
  "file-text":
    "M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z",
  share:
    "M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11A2.99 2.99 0 0018 8a3 3 0 10-3-3c0 .24.04.47.09.7L8.04 9.81A2.99 2.99 0 006 9a3 3 0 100 6c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65a2.92 2.92 0 002.92 2.92A2.92 2.92 0 0021 19a2.92 2.92 0 00-3-2.92z",
  key:
    "M21 10h-8.35A5.99 5.99 0 007 6a6 6 0 100 12 5.99 5.99 0 005.65-4H13v2h2v-2h2v2h2v-2h2v-4zm-14 2a2 2 0 110-4 2 2 0 010 4z",
  print:
    "M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7a1 1 0 110-2 1 1 0 010 2zm-1-5H6V3h12v4z",
  camera:
    "M12 15.2a3.2 3.2 0 100-6.4 3.2 3.2 0 000 6.4zM9 2L7.17 4H4a2 2 0 00-2 2v12a2 2 0 002 2h16a2 2 0 002-2V6a2 2 0 00-2-2h-3.17L15 2H9z",
  "video-off":
    "M21 6.5l-4 4V7a1 1 0 00-1-1H9.82L21 17.18V6.5zM3.27 2L2 3.27 4.73 6H4a1 1 0 00-1 1v10a1 1 0 001 1h12c.21 0 .39-.08.55-.18L19.73 21 21 19.73 3.27 2z",
  "shield-check":
    "M12 2L3 7v5c0 5.55 3.84 10.74 9 12 5.16-1.26 9-6.45 9-12V7l-9-5zm-1 15.93C7.05 16.13 5 12.87 5 9.97V8.35l7-3.89 7 3.89v1.62c0 2.9-2.05 6.16-6 7.96l-1 .49zM10 14.4l-2.8-2.8 1.4-1.4 1.4 1.4 4.24-4.24 1.4 1.41L10 14.4z",
  fingerprint:
    "M17.81 4.47c-.08 0-.16-.02-.23-.06C15.66 3.42 14 3 12.01 3c-1.98 0-3.86.47-5.57 1.41-.24.13-.54.04-.68-.2a.506.506 0 01.2-.68C7.82 2.52 9.86 2 12.01 2c2.13 0 3.99.47 6.03 1.52.25.13.34.43.21.67a.49.49 0 01-.44.28zM3.5 9.72a.499.499 0 01-.25-.93c1.73-1.04 3.68-1.59 5.64-1.59h.38c2.03.04 3.92.64 5.63 1.58.24.14.33.44.19.68-.14.24-.44.33-.68.19-1.57-.86-3.3-1.41-5.15-1.45h-.34c-1.79 0-3.57.5-5.17 1.45-.07.05-.16.07-.25.07zm1.7 6.65a.494.494 0 01-.44-.74c.81-1.49 1.22-3.14 1.22-4.9v-.01c-.01-1.14.18-2.24.57-3.22.13-.32.5-.47.82-.34.31.13.46.5.33.82-.34.84-.5 1.79-.49 2.75.01 1.92-.45 3.73-1.33 5.28-.09.16-.26.24-.43.24a.5.5 0 01-.25-.06zm8.58.21c-.13 0-.26-.05-.35-.15-.48-.5-1.08-.76-1.74-.76-.66 0-1.26.27-1.75.78-.2.21-.53.22-.74.02a.53.53 0 01-.02-.74c.66-.67 1.52-1.04 2.5-1.04 1 0 1.72.38 2.44 1.04.21.19.22.52.03.73-.1.12-.24.18-.37.12zM12 22a.494.494 0 01-.48-.49c0-3.14-1.64-5.96-4.39-7.54a.502.502 0 01.5-.87c3.08 1.77 4.86 4.9 4.86 8.4 0 .28-.22.5-.49.5zm3.21-1.26c-.03 0-.06 0-.09-.01a7.36 7.36 0 01-4.89-5.38.503.503 0 01.39-.59c.27-.06.54.11.59.39a6.37 6.37 0 004.22 4.64c.26.09.4.37.31.64-.07.2-.26.31-.53.31zM19.51 15a.5.5 0 01-.36-.15c-.97-.99-1.53-2.33-1.53-3.69v-.69c.02-1.44-.38-2.77-1.16-3.93a.499.499 0 01.83-.56c.88 1.31 1.33 2.81 1.31 4.46v.71c0 1.1.45 2.18 1.27 2.97.19.2.19.52-.01.72a.5.5 0 01-.35.16z",
};

export type IconName = keyof typeof ICON_PATHS;

export interface IconProps {
  /** Icon name from the defined set */
  name: IconName;
  /** Size in pixels (default 16) */
  size?: number;
  /** Accessible label — if omitted, icon is decorative (aria-hidden) */
  label?: string;
  /** Additional CSS class */
  class?: string;
}

export const Icon: Component<IconProps> = (props) => {
  const [local, rest] = splitProps(props, ["name", "size", "label", "class"]);
  const size = () => local.size ?? 16;
  const path = () => ICON_PATHS[local.name] ?? "";

  const ariaProps = (): JSX.SvgSVGAttributes<SVGSVGElement> => {
    if (local.label) {
      return { "aria-label": local.label, role: "img" };
    }
    return { "aria-hidden": "true" };
  };

  return (
    <svg
      class={`${styles.icon} ${local.class ?? ""}`.trim()}
      width={size()}
      height={size()}
      viewBox="0 0 24 24"
      fill="currentColor"
      xmlns="http://www.w3.org/2000/svg"
      {...ariaProps()}
    >
      <path d={path()} />
    </svg>
  );
};
